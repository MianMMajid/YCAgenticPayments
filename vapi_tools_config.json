{
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "search_properties",
        "description": "Search for properties matching the user's criteria. Use this when the user wants to find homes, see listings, or browse properties in a specific area.",
        "parameters": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "City and state (e.g., 'Baltimore, MD', 'Arlington, VA')"
            },
            "max_price": {
              "type": "integer",
              "description": "Maximum purchase price in dollars"
            },
            "min_beds": {
              "type": "integer",
              "description": "Minimum number of bedrooms"
            },
            "min_baths": {
              "type": "number",
              "description": "Minimum number of bathrooms (can be decimal like 1.5)"
            },
            "property_type": {
              "type": "string",
              "enum": ["single-family", "condo", "townhouse", "multi-family"],
              "description": "Type of property"
            },
            "user_id": {
              "type": "string",
              "description": "User identifier from the conversation context"
            }
          },
          "required": ["location", "max_price", "user_id"]
        }
      },
      "server": {
        "url": "https://ycnov15vapivoice.ngrok.app/tools/search"
      }
    },
    {
      "type": "function",
      "function": {
        "name": "analyze_risk",
        "description": "Analyze a property for potential red flags including overpricing, flood risk, crime, and tax issues. Use this when the user asks about problems, risks, or wants to check if a property is a good deal.",
        "parameters": {
          "type": "object",
          "properties": {
            "property_id": {
              "type": "string",
              "description": "Unique identifier for the property from search results"
            },
            "address": {
              "type": "string",
              "description": "Full property address"
            },
            "list_price": {
              "type": "integer",
              "description": "Listed price of the property in dollars"
            },
            "user_id": {
              "type": "string",
              "description": "User identifier from the conversation context"
            }
          },
          "required": ["property_id", "address", "list_price", "user_id"]
        }
      },
      "server": {
        "url": "https://ycnov15vapivoice.ngrok.app/tools/analyze-risk"
      }
    },
    {
      "type": "function",
      "function": {
        "name": "schedule_viewing",
        "description": "Schedule a property viewing by contacting the listing agent. Use this when the user wants to see a property, book a showing, or arrange a tour.",
        "parameters": {
          "type": "object",
          "properties": {
            "property_id": {
              "type": "string",
              "description": "Unique identifier for the property"
            },
            "listing_url": {
              "type": "string",
              "description": "URL of the property listing (typically from Zillow)"
            },
            "requested_time": {
              "type": "string",
              "format": "date-time",
              "description": "Requested viewing time in ISO 8601 format (e.g., '2025-11-15T14:00:00Z')"
            },
            "user_id": {
              "type": "string",
              "description": "User identifier from the conversation context"
            },
            "user_name": {
              "type": "string",
              "description": "User's full name"
            },
            "user_email": {
              "type": "string",
              "description": "User's email address"
            }
          },
          "required": ["property_id", "listing_url", "requested_time", "user_id", "user_name", "user_email"]
        }
      },
      "server": {
        "url": "https://ycnov15vapivoice.ngrok.app/tools/schedule"
      }
    },
    {
      "type": "function",
      "function": {
        "name": "draft_offer",
        "description": "Generate a purchase offer document for the user to sign. Use this when the user wants to make an offer, submit a bid, or purchase a property.",
        "parameters": {
          "type": "object",
          "properties": {
            "property_id": {
              "type": "string",
              "description": "Unique identifier for the property"
            },
            "address": {
              "type": "string",
              "description": "Full property address"
            },
            "offer_price": {
              "type": "integer",
              "description": "Offer amount in dollars"
            },
            "closing_days": {
              "type": "integer",
              "description": "Number of days until closing (typically 14, 30, or 45)"
            },
            "financing_type": {
              "type": "string",
              "enum": ["cash", "conventional", "fha", "va"],
              "description": "Type of financing"
            },
            "contingencies": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["inspection", "appraisal", "financing", "sale-of-home"]
              },
              "description": "List of contingencies to include in the offer"
            },
            "user_id": {
              "type": "string",
              "description": "User identifier from the conversation context"
            },
            "user_email": {
              "type": "string",
              "description": "User's email address for receiving the signing link"
            }
          },
          "required": ["property_id", "address", "offer_price", "closing_days", "financing_type", "user_id", "user_email"]
        }
      },
      "server": {
        "url": "https://ycnov15vapivoice.ngrok.app/tools/draft-offer"
      }
    }
  ]
}
